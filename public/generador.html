<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generador Pro de Números</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="bg-slate-950 text-white font-sans">

    <div class="min-h-screen flex flex-col items-center justify-center px-6 py-10">
        <div class="w-full max-w-2xl bg-slate-900 p-8 rounded-2xl border border-slate-800 shadow-2xl">
            <h1 class="text-3xl font-bold mb-6 text-center text-blue-500">Generador de Números!!</h1>
            
            <div class="grid md:grid-cols-2 gap-4 mb-6">
                <div>
                    <label class="block mb-2 text-sm font-medium text-slate-400">Cantidad</label>
                    <input type="number" id="cantidad" 
                           class="w-full p-3 bg-slate-800 border border-slate-700 rounded-lg text-white outline-none focus:border-blue-500" 
                           min="1" max="500000" value="1000">
                </div>
                
                <div>
                    <label class="block mb-2 text-sm font-medium text-slate-400">Operador</label>
                    <select id="operador" class="w-full p-3 bg-slate-800 border border-slate-700 rounded-lg text-white outline-none focus:border-blue-500">
                        <option value="TODOS">Todos (Aleatorio)</option>
                        <option value="MOVISTAR">Movistar</option>
                        <option value="VODAFONE">Vodafone</option>
                        <option value="ORANGE">Orange</option>
                        <option value="YOIGO">Yoigo</option>
                        <option value="DIGI">Digi</option>
                        <option value="JAZZTEL">Jazztel</option>
                        <option value="LEBARA">Lebara</option>
                        <option value="MASMOVIL">MásMóvil</option>
                    </select>
                </div>
            </div>

            <div class="flex items-center justify-between mb-6 gap-4">
                <button id="generarBtn" class="flex-1 bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg transition-all flex items-center justify-center gap-2">
                    <i class="fa-solid fa-bolt"></i> Generar
                </button>
                <button id="descargarBtn" disabled class="flex-1 bg-emerald-600 hover:bg-emerald-700 text-white font-bold py-3 px-6 rounded-lg transition-all flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed">
                    <i class="fa-solid fa-file-csv"></i> Descargar CSV
                </button>
            </div>

            <div class="text-center mb-4">
                <span id="contador" class="text-sm text-slate-400 italic">Listo para generar</span>
            </div>

            <textarea id="resultado" readonly placeholder="Los números aparecerán aquí..."
                      class="w-full h-64 p-4 bg-slate-950 border border-slate-800 rounded-xl font-mono text-sm text-blue-400 outline-none resize-none mb-4 focus:border-blue-500">
            </textarea>
        </div>
    </div>

<script>
    // 1. Configuración de Prefijos
    const prefijosMapa = {
        'MOVISTAR': ['600', '604', '605', '606', '609', '619', '629', '630', '639', '650', '659', '670', '679', '696', '699'],
        'VODAFONE': ['607', '608', '610', '617', '627', '649', '660', '661', '662', '663', '664', '665', '666', '667', '668', '669'],
        'ORANGE':   ['615', '616', '618', '625', '642', '643', '646', '647', '648', '651', '652', '653', '671', '672', '673', '674', '675', '676', '677', '681', '682', '683', '689'],
        'YOIGO':    ['622'],
        'DIGI':     ['722'],
        'JAZZTEL':  ['640', '644', '645'],
        'LEBARA':   ['632', '634', '694'],
        'MASMOVIL': ['623', '633', '693'],
        'TODOS': [] 
    };

    // Auto-llenado de TODOS
    prefijosMapa.TODOS = Object.values(prefijosMapa).flat();

    let numerosGenerados = [];

    // 2. Lógica de Generación
    document.getElementById('generarBtn').addEventListener('click', function() {
        const cantidad = parseInt(document.getElementById('cantidad').value);
        const opSeleccionado = document.getElementById('operador').value;
        const btn = this;
        const resArea = document.getElementById('resultado');
        const cont = document.getElementById('contador');
        const descBtn = document.getElementById('descargarBtn');

        if (isNaN(cantidad) || cantidad <= 0 || cantidad > 500000) {
            alert("Por favor, ingresa una cantidad válida entre 1 y 500,000");
            return;
        }

        // UI Feedback
        btn.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i> Generando...';
        btn.disabled = true;
        descBtn.disabled = true;

        setTimeout(() => {
            const conjuntoNumeros = new Set();
            const prefijos = prefijosMapa[opSeleccionado];
            
            while (conjuntoNumeros.size < cantidad) {
                const pre = prefijos[Math.floor(Math.random() * prefijos.length)];
                // Generamos un sufijo de 6 dígitos aleatorios
                const sufijo = Math.floor(100000 + Math.random() * 900000).toString();
                conjuntoNumeros.add(pre + sufijo);
            }

            numerosGenerados = Array.from(conjuntoNumeros);
            
            // Renderizado parcial para no colapsar el navegador
            resArea.value = numerosGenerados.slice(0, 3000).join('\n') + 
                (numerosGenerados.length > 3000 ? `\n\n... [+${(numerosGenerados.length - 3000).toLocaleString()} números adicionales en el archivo]` : '');
            
            cont.innerText = `✨ ${numerosGenerados.length.toLocaleString()} números únicos listos`;
            descBtn.disabled = false;
            
            btn.innerHTML = '<i class="fa-solid fa-bolt"></i> Generar';
            btn.disabled = false;
        }, 50);
    });

    // 3. Lógica de Descarga
    document.getElementById('descargarBtn').addEventListener('click', function() {
        if (numerosGenerados.length === 0) return;

        const blob = new Blob(["Numero\n", numerosGenerados.join("\n")], { type: 'text/csv;charset=utf-8;' });
        const url = URL.createObjectURL(blob);
        
        const link = document.createElement("a");
        link.href = url;
        link.download = `lista_${document.getElementById('operador').value.toLowerCase()}_${new Date().getTime()}.csv`;
        link.click();
        
        setTimeout(() => URL.revokeObjectURL(url), 100);
    });
</script>
</body>
</html>